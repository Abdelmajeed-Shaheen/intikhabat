{% extends "common_base.html" %}
{% load staticfiles %}


{% block extra_content %}
  <!-- ======= Hero Section ======= -->
  <section id="hero">
    <div class="hero-container">
      <div class="wow fadeIn">
        <h1>انتخابات مجلس النواب الاردني</h1>
        <div class="actions">
          <a href="#about" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">مرشح</a>
          <a href="/" class="btn btn-success" data-toggle="modal" data-target="#voterModal">ناخب</a>
        </div>
      </div>
    </div>
  </section><!-- End Hero -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header"> 
        <h5 class="modal-title" id="exampleModalLabel">مرحبا بك </h5>

        </button>
      </div>
      <div class="modal-body ">
       <button type="button" class="btn btn-success btn-lg btn-block" data-toggle="modal" data-target="#loginform">تسجيل دخول</button>
       <button type="button" class="btn btn-primary btn-lg btn-block">مستخدم جديد</button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">اغلاق</button>
        
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="loginform" tabindex="-1" role="dialog" aria-labelledby="loginformlabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header"> 
        <h5 class="modal-title" id="loginformlabel">تسجيل دخول</h5>

        </button>
      </div>
      
        <div class="modal-body">
          <form id="loginform" method="POST" action="{% url 'userlogin' %}">
          {% csrf_token %} 
            <div class="form-group text-aligner">
              <label for="recipient-name" class="col-form-label">رقم الهاتف / اسم المستخدم</label>
              {{login_form.username}}
            </div>
            <div class="form-group text-aligner">
              <label for="message-text" class="col-form-label">كلمة السر</label>
              {{login_form.password}}
            </div>
             <div class="form-group ">
              
              
            </div>
          </form>
        </div>
      
      <div class="modal-footer">
        <button id="submit-form" class="btn btn-primary btn-block">تسجيل دخول</button>
        <button type="button" class="btn btn-danger btn-block" data-dismiss="modal">اغلاق</button>
      </div>
    </div>
  </div>
</div>
{% comment %} voter modal {% endcomment %}
 <div class="modal fade" id="voterModal" tabindex="-1" role="dialog" aria-labelledby="voterLable" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header"> 
        <h5 class="modal-title" id="voterLable">مرحبا بك </h5>

        </button>
      </div>
      <div class="modal-body ">
       <button type="button" class="btn btn-success btn-lg btn-block" data-toggle="modal" data-target="#loginform">تسجيل دخول</button>
       <button type="button" class="btn btn-primary btn-lg btn-block" data-toggle="modal" data-target="#regModal">مستخدم جديد</button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">اغلاق</button>
        
      </div>
    </div>
  </div>
</div>
{% comment %} regform modal {% endcomment %}
 <div class="modal fade text-aligner" id="regModal" tabindex="-1" role="dialog" aria-labelledby="regLable" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header"> 
        <h5 class="modal-title" id="regLable">مرحبا بك </h5>

        </button>
      </div>
      <div class="modal-body ">
        {{voter_reg_form.as_p}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">اغلاق</button>
        
      </div>
    </div>
  </div>
</div>

{% endblock  %}

{% block main %}
{% endblock %}

{% block js %}
<script>
  $("#submit-form").on('click',function(){
    pwd=$("#id_password").val()
    user=$("#id_username").val()
    $.ajax({
      url:"{% url 'userlogin' %}",
      type:'POST',
      dataType:'JSON',
      data:{
        username:user,
        password:pwd,
        csrfmiddlewaretoken: '{{ csrf_token }}' 
      },
      

      success:function (result) {
        window.location.replace(result.redirect_to);
      },
    })

  })
</script>
{% endblock %}